<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thulane Nonyane Studios</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #000;
            color: #fff;
            text-align: center;
        }
        video {
            width: 85%;
            height: auto;
            margin-top: 20px;
            border: 5px solid #444;
            border-radius: 10px;
            filter: brightness(1.5) contrast(2) saturate(2.5) drop-shadow(0 0 10px #000);
            will-change: transform, opacity;
            transition: all 0.4s ease-in-out;
            object-fit: cover;
        }
        video:hover {
            transform: scale(1.02);
            filter: brightness(1.6) contrast(2.3) saturate(3);
        }
        input, select, button {
            margin: 15px 5px;
            padding: 10px 15px;
            font-size: 16px;
            border-radius: 5px;
            border: 1px solid #ccc;
            background-color: #222;
            color: #fff;
            cursor: pointer;
        }
        button:hover, input:hover {
            background-color: #444;
        }
        h1 {
            margin-top: 20px;
        }
        #pdfContent {
            margin: 20px auto;
            text-align: left;
            max-width: 80%;
            background-color: #111;
            padding: 20px;
            border-radius: 10px;
            overflow: auto;
            height: 300px;
        }
        #volumeControl {
            margin-top: 20px;
            width: 80%;
        }
    </style>
</head>
<body>
    <h1>Thulane Nonyane Studios</h1>
    
    <!-- Video Upload Section -->
    <label for="videoUpload">Upload a Video:</label>
    <input type="file" id="videoUpload" accept="video/mp4, video/webm, video/ogg" onchange="loadUploadedVideo(event)">
    <br><br>

    <!-- Enhanced Video Player -->
    <video id="videoPlayer" controls>
        <source id="videoSource" src="example-video.mp4" type="video/mp4">
        Your browser does not support the video tag.
    </video>
    
    <!-- Volume Control -->
    <label for="volumeControl">Volume Control (Up to 400 times):</label>
    <input type="range" id="volumeControl" min="0" max="1" step="0.01" value="1" onchange="adjustVolume(event)">
    
    <br>
    <!-- Translation Controls -->
    <label for="language">Select Translation Language:</label>
    <select id="language" onchange="loadPdf()">
        <option value="Japanese.pdf">Japanese</option>
        <option value="Russian.pdf">Russian</option>
        <option value="Chinese.pdf">Chinese</option>
        <option value="French.pdf">French</option>
    </select>
    <br><br>

    <div id="pdfContent">Select a language to view its dictionary.</div>
    <br>
    <button onclick="startTranslation()">Start Real-Time Translation</button>
    <button onclick="stopTranslation()">Stop Translation</button>

    <script src="https://cdn.jsdelivr.net/npm/pdfjs-dist/build/pdf.min.js"></script>
    <script>
        // Function to load PDF based on selected language
        function loadPdf() {
            const language = document.getElementById('language').value;
            const pdfContent = document.getElementById('pdfContent');

            // Show placeholder content initially
            pdfContent.textContent = 'PDF content is being loaded...';

            const loadingTask = pdfjsLib.getDocument(`/pdfs/${language}`);  // Load the PDF from server directory
            loadingTask.promise.then((pdf) => {
                let textContent = '';
                let pagePromises = [];

                for (let i = 1; i <= pdf.numPages; i++) {
                    pagePromises.push(
                        pdf.getPage(i).then((page) => {
                            return page.getTextContent().then((text) => {
                                text.items.forEach((item) => {
                                    textContent += item.str + ' ';
                                });
                            });
                        })
                    );
                }

                Promise.all(pagePromises).then(() => {
                    pdfContent.textContent = textContent;
                    // After loading, translate the extracted text if needed
                    const languageSelection = document.getElementById('language').value;
                    translateText(textContent, languageSelection).then((translatedText) => {
                        pdfContent.textContent = translatedText;
                    });
                });
            }).catch((error) => {
                pdfContent.textContent = "Error loading PDF. Make sure the file exists and is in the correct directory.";
                console.error(error);
            });
        }

        // Translation logic (same as before)
        const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
        const synth = window.speechSynthesis;
        let translating = false;

        function startTranslation() {
            const language = document.getElementById('language').value;
            translating = true;
            recognition.lang = 'en-US';
            recognition.interimResults = false;

            recognition.onresult = async (event) => {
                const speechText = event.results[0][0].transcript;
                const translatedText = await translateText(speechText, language);

                if (translating) {
                    const utterance = new SpeechSynthesisUtterance(translatedText);
                    utterance.lang = language;
                    synth.speak(utterance);
                }
            };

            recognition.start();
        }

        function stopTranslation() {
            translating = false;
            recognition.stop();
        }

        async function translateText(text, targetLanguage) {
            const response = await fetch(`https://api.mymemory.translated.net/get?q=${encodeURIComponent(text)}&langpair=en|${targetLanguage}`);
            const data = await response.json();
            return data.responseData.translatedText;
        }

        // Function to adjust video volume
        function adjustVolume(event) {
            const videoPlayer = document.getElementById('videoPlayer');
            videoPlayer.volume = event.target.value;
        }
    </script>
</body>
</html>
